# 每日一句
Be good. Be bad. Just be yourself.
是好还是坏，只要做你自己就好。

# 概念

数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。索引的实现通常使用B树及其变种B+树。

在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法。这种数据结构，叫做索引

为表设置索引要付出代价的：一是增加了数据库的存储空间，二是在插入和修改数据时要花费较多的时间（因为索引也要随之变动）

# 创建索引的优缺点

**优点**：

* 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性
* 可以大大加快数据的检索速度，这也是创建索引的最主要的原因
* 可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义
* 在使用分组和排序子句进行数据检索时，同样可以显著减少查询中分组和排序的时间
* 通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能

**缺点：**

* 创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加
* 索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚簇索引，那么需要的空间就会更大。
* 当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护程度

# 关于是否应该创建索引的列的探讨

* 对于那些在查询中很少使用或者参考的列不应该创建索引
* 对于那些只有很少数据值的列也不应该增加索引
* 对于那些定义为 text、image、bit 数据类型的列不应该增加索引
* 当修改性能远远大于检索性能时，不应该创建索引。修改性能和检索性能时相互矛盾的。

# 索引类型

### 唯一索引

唯一索引是不允许其中任何两行具有相同索引值的索引
当现有数据中存在重复的键值时，大多数数据库不允许将新创建的唯一索引与表一起保存。
数据库还可能防止添加将在表中创建重复键值的新数据。例如，如果在 employee 表中职员的姓名（name）上创建了唯一索引，则任何两个员工都不能同性

### 主键索引

数据库表经常有一列或列组合，其值唯一标识表中的每一行，该列称为表的主键
在数据库关系图中为表定义主键将自动创建索引，主键索引是唯一索引的特定类型。该索引要求主键中的每个值都唯一。当在查询中使用主键索引时，它还允许对数据的快速访问

### 聚集索引

在聚集索引中，表中行的物理顺序与键值的逻辑（索引）顺序相同。一个表只能包含一个聚集索引
如果某索引不是聚集索引，则表中行的物理顺序与键值的逻辑顺序不匹配。与非聚集索引相比，聚集索引通常提供更快的数据访问速度

# 局部性原理与磁盘预读

由于存储介质特性，磁盘本身存取就比主存慢很多，再加上机械运动耗费，磁盘的 存取速度往往是主存的几百分之一，因此**为了提高效率，要尽量减少磁盘IO。**

为了达到目的，磁盘往往不是严格按需读取，而是每次都会预读，即便只需要一个字节，磁盘也会从这个位置开始，顺序向后读取一定长度的数据放入内存。

这样做的理论依据是计算机科学中著名的局部性原理：当一个数据被用到时，其附近的数据也通常会马上被使用。程序运行期间所需要的数据通常比较集中。






# 美文佳句

总有一个人，一直住在心里，却告别在生活里。忘不掉的是回忆，继续的是生活，来来往往身边出现了很多人，总有一个位置，一直没有变。看看温暖的阳光，偶尔还是会想一想。怀旧，不是因为那个时代多么好，而是那个时候，你年轻。